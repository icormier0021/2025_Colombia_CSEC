packages <- c("survey", "haven", "dplyr", "labelled", "tidyr", "DT", "skimr", "ggplot2", "knitr", "kableExtra", "svyweight", "purrr", "srvyr", "tibble", "here")
if(!require("pacman"))install.packages("pacman")
pacman::p_load(char = packages, character.only = TRUE)
here::here
here::here()
VACSData <- read_sav(here::here("rawdata", "Colombia_VACS_national_data.sav"))
View(VACSData)
test <- VACSData %>%
library(dplyr)
test <- VACSData %>%
filter(Q2>18)
test
View(test)
test <- VACSData %>%
filter(Q2>18) %>%
select(H54)
View(test)
test[1[1]]
test[[1]][1]
is.na(test[[1]][1])
View(VACSData)
library(fs)
#knitr::opts_knit$set(root.dir = fs::path_dir(knitr::current_input()))
options(repos = c(CRAN = "https://cloud.r-project.org"))
knitr::opts_chunk$set(echo = TRUE)
packages <- c("survey", "haven", "dplyr", "labelled", "tidyr", "DT", "skimr", "ggplot2", "knitr", "kableExtra", "svyweight", "purrr", "srvyr", "tibble", "here")
if(!require("pacman"))install.packages("pacman")
pacman::p_load(char = packages, character.only = TRUE)
rawDF <- VACSData %>%
select(
DEPT, MUNI, PSU, USM, HH, VACS_ID, Wght_final, H6, H7H, H18, H19, H19A, H54, H56, H58, H19B,
H20, Sex, Q2, Q2A, Q3, Q7AA, Q13, Q19, Q29, Q58, Q70, Q71, Q306, Q21, Q31, Q7, Q25, Q35,
Q7AB, Q7AC, Q7AD,
Q36A, Q36B, Q36C, Q36D, Q36E,
Q59, Q80, Q82, Q84, Q86,
Q407, Q409, Q500, Q600,
Q700A, Q700B, Q800A, Q800B,
Q1205, Q1207, Q1208, Q1209, Q1210, Q1200,
Q100A, Q100B, Q100C, Q100D,
Q116A, Q116B, Q116C, Q116D,
Q128A, Q128B, Q128C, Q128D,
Q142A, Q142B, Q142C, Q142D,
Q300A, Q300B, Q300C, Q300D,
Q305A, Q305B, Q305C, Q305D, Q305E, Q305F,
Q1206A, Q1206B, Q1206C, Q1206D, Q1206E, Q1206F,
Q400B, Q408, Q417, Q504, Q505, Q503
)
packages <- c("survey", "haven", "dplyr", "labelled", "tidyr", "DT", "skimr", "ggplot2", "knitr", "kableExtra", "svyweight", "purrr", "srvyr", "tibble", "here", "naniar")
if(!require("pacman"))install.packages("pacman")
pacman::p_load(char = packages, character.only = TRUE)
rawDF %>%
vis_miss(cluster = TRUE, show_perc = FALSE) +
scale_fill_manual(
values = book_colors[c(3, 1)],
labels = c("Present", "Missing"),
name = ""
) +
theme(
plot.margin = margin(5.5, 30, 5.5, 5.5, "pt"),
axis.text.x = element_text(angle = 70)
)
book_colors <- c(
"#E69F00",  # orange
"#56B4E9",  # light blue
"#009E73",  # green
"#F0E442",  # yellow
"#0072B2",  # dark blue
"#D55E00",  # red
"#CC79A7"   # pink
)
rawDF %>%
vis_miss(cluster = TRUE, show_perc = FALSE) +
scale_fill_manual(
values = book_colors[c(3, 1)],
labels = c("Present", "Missing"),
name = ""
) +
theme(
plot.margin = margin(5.5, 30, 5.5, 5.5, "pt"),
axis.text.x = element_text(angle = 70)
)
miss_plot <- rawDF %>%
vis_miss(cluster = TRUE, show_perc = FALSE) +
scale_fill_manual(
values = book_colors[c(3, 1)],
labels = c("Present", "Missing"),
name = ""
) +
theme(
plot.margin = margin(5.5, 30, 5.5, 5.5, "pt"),
axis.text.x = element_text(angle = 70, hjust = 1)
)
ggsave(
filename = "vis_miss_plot.png",
plot = miss_plot,
width = 24,        # increase if needed (in inches)
height = 8,        # height in inches
dpi = 300          # high resolution
)
gc()
